{
  "title": "Honua - Platform Overview",
  "uid": "honua-platform-overview",
  "description": "Unified platform overview dashboard with key metrics from all subsystems",
  "tags": ["honua", "platform", "overview"],
  "links": [
    {"title": "Process Framework", "url": "/d/honua-process-framework", "type": "link"},
    {"title": "Circuit Breaker", "url": "/d/honua-circuit-breaker", "type": "link"},
    {"title": "API Metrics", "url": "/d/honua-api-metrics", "type": "link"},
    {"title": "Redis Performance", "url": "/d/honua-redis", "type": "link"},
    {"title": "Cache Metrics", "url": "/d/honua-cache-metrics", "type": "link"},
    {"title": "LLM Providers", "url": "/d/honua-llm-providers", "type": "link"}
  ],
  "templating": {
    "list": [
      {"name": "datasource", "type": "datasource", "query": "prometheus"},
      {"name": "job", "type": "query", "datasource": "${datasource}", "query": "label_values(up, job)", "includeAll": true, "allValue": ".*"}
    ]
  },
  "panels": [
    {
      "type": "row",
      "gridPos": {"x": 0, "y": 0, "w": 24, "h": 1},
      "title": "System Health"
    },
    {
      "title": "Services Up",
      "type": "stat",
      "gridPos": {"x": 0, "y": 1, "w": 4, "h": 4},
      "targets": [{"expr": "sum(up{job=~\"$job\"})"}],
      "fieldConfig": {"defaults": {"unit": "short", "color": {"mode": "thresholds"}, "thresholds": {"steps": [{"color": "red"}, {"color": "yellow", "value": 1}, {"color": "green", "value": 2}]}}}
    },
    {
      "title": "API Requests/sec",
      "type": "stat",
      "gridPos": {"x": 4, "y": 1, "w": 4, "h": 4},
      "targets": [{"expr": "sum(rate(honua_api_requests{job=~\"$job\"}[5m]))"}],
      "fieldConfig": {"defaults": {"unit": "reqps", "thresholds": {"steps": [{"color": "green"}, {"color": "yellow", "value": 100}, {"color": "red", "value": 500}]}}}
    },
    {
      "title": "Active Processes",
      "type": "stat",
      "gridPos": {"x": 8, "y": 1, "w": 4, "h": 4},
      "targets": [{"expr": "sum(process_active_count{job=~\"$job\"})"}],
      "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"steps": [{"color": "green"}, {"color": "yellow", "value": 10}, {"color": "red", "value": 50}]}}}
    },
    {
      "title": "Circuit Breakers Open",
      "type": "stat",
      "gridPos": {"x": 12, "y": 1, "w": 4, "h": 4},
      "targets": [{"expr": "sum(increase(honua_circuit_breaker_state_changes{job=~\"$job\", state=\"open\"}[1h]))"}],
      "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"steps": [{"color": "green"}, {"color": "yellow", "value": 1}, {"color": "red", "value": 5}]}}}
    },
    {
      "title": "Cache Hit Rate",
      "type": "stat",
      "gridPos": {"x": 16, "y": 1, "w": 4, "h": 4},
      "targets": [{"expr": "100 * sum(rate(honua_raster_cache_hits{job=~\"$job\"}[5m])) / (sum(rate(honua_raster_cache_hits{job=~\"$job\"}[5m])) + sum(rate(honua_raster_cache_misses{job=~\"$job\"}[5m]))"}],
      "fieldConfig": {"defaults": {"unit": "percent", "max": 100, "thresholds": {"steps": [{"color": "red"}, {"color": "yellow", "value": 70}, {"color": "green", "value": 90}]}}}
    },
    {
      "title": "Redis Connected",
      "type": "stat",
      "gridPos": {"x": 20, "y": 1, "w": 4, "h": 4},
      "targets": [{"expr": "redis_connected_clients{job=~\"$job\"}"}],
      "fieldConfig": {"defaults": {"unit": "short", "thresholds": {"steps": [{"color": "green"}, {"color": "yellow", "value": 100}, {"color": "red", "value": 500}]}}}
    },
    {
      "type": "row",
      "gridPos": {"x": 0, "y": 5, "w": 24, "h": 1},
      "title": "API Performance"
    },
    {
      "title": "API Latency Percentiles",
      "type": "timeseries",
      "gridPos": {"x": 0, "y": 6, "w": 12, "h": 8},
      "targets": [
        {"expr": "histogram_quantile(0.50, sum(rate(honua_api_request_latency_bucket{job=~\"$job\"}[5m])) by (le))", "legendFormat": "p50"},
        {"expr": "histogram_quantile(0.95, sum(rate(honua_api_request_latency_bucket{job=~\"$job\"}[5m])) by (le))", "legendFormat": "p95"},
        {"expr": "histogram_quantile(0.99, sum(rate(honua_api_request_latency_bucket{job=~\"$job\"}[5m])) by (le))", "legendFormat": "p99"}
      ],
      "fieldConfig": {"defaults": {"unit": "ms"}}
    },
    {
      "title": "Error Rate",
      "type": "timeseries",
      "gridPos": {"x": 12, "y": 6, "w": 12, "h": 8},
      "targets": [{"expr": "sum(rate(honua_api_errors{job=~\"$job\"}[5m])) by (error_category)", "legendFormat": "{{error_category}}"}],
      "fieldConfig": {"defaults": {"unit": "short"}}
    },
    {
      "type": "row",
      "gridPos": {"x": 0, "y": 14, "w": 24, "h": 1},
      "title": "Process Framework"
    },
    {
      "title": "Process Success Rate",
      "type": "timeseries",
      "gridPos": {"x": 0, "y": 15, "w": 12, "h": 8},
      "targets": [{"expr": "avg(process_workflow_success_rate{job=~\"$job\"}) by (workflow_type)", "legendFormat": "{{workflow_type}}"}],
      "fieldConfig": {"defaults": {"unit": "percentunit", "max": 1, "min": 0}}
    },
    {
      "title": "Process Execution Time",
      "type": "timeseries",
      "gridPos": {"x": 12, "y": 15, "w": 12, "h": 8},
      "targets": [
        {"expr": "histogram_quantile(0.95, sum(rate(process_execution_duration_bucket{job=~\"$job\"}[5m])) by (le, workflow_type))", "legendFormat": "{{workflow_type}} p95"}
      ],
      "fieldConfig": {"defaults": {"unit": "ms"}}
    },
    {
      "type": "row",
      "gridPos": {"x": 0, "y": 23, "w": 24, "h": 1},
      "title": "Cache & Storage"
    },
    {
      "title": "Cache Performance",
      "type": "timeseries",
      "gridPos": {"x": 0, "y": 24, "w": 12, "h": 8},
      "targets": [
        {"expr": "sum(rate(honua_raster_cache_hits{job=~\"$job\"}[5m]))", "legendFormat": "Hits"},
        {"expr": "sum(rate(honua_raster_cache_misses{job=~\"$job\"}[5m]))", "legendFormat": "Misses"}
      ],
      "fieldConfig": {"defaults": {"unit": "reqps"}}
    },
    {
      "title": "Render Latency",
      "type": "timeseries",
      "gridPos": {"x": 12, "y": 24, "w": 12, "h": 8},
      "targets": [
        {"expr": "histogram_quantile(0.95, sum(rate(honua_raster_render_latency_ms_bucket{job=~\"$job\"}[5m])) by (le))", "legendFormat": "p95"}
      ],
      "fieldConfig": {"defaults": {"unit": "ms"}}
    },
    {
      "type": "row",
      "gridPos": {"x": 0, "y": 32, "w": 24, "h": 1},
      "title": "Resource Utilization"
    },
    {
      "title": "Memory Usage",
      "type": "timeseries",
      "gridPos": {"x": 0, "y": 33, "w": 8, "h": 8},
      "targets": [{"expr": "process_resident_memory_bytes{job=~\"$job\"}", "legendFormat": "{{job}}"}],
      "fieldConfig": {"defaults": {"unit": "bytes"}}
    },
    {
      "title": "CPU Usage",
      "type": "timeseries",
      "gridPos": {"x": 8, "y": 33, "w": 8, "h": 8},
      "targets": [{"expr": "rate(process_cpu_seconds_total{job=~\"$job\"}[5m])", "legendFormat": "{{job}}"}],
      "fieldConfig": {"defaults": {"unit": "percentunit"}}
    },
    {
      "title": "Network IO",
      "type": "timeseries",
      "gridPos": {"x": 16, "y": 33, "w": 8, "h": 8},
      "targets": [
        {"expr": "rate(redis_net_input_bytes_total{job=~\"$job\"}[5m])", "legendFormat": "Input"},
        {"expr": "rate(redis_net_output_bytes_total{job=~\"$job\"}[5m])", "legendFormat": "Output"}
      ],
      "fieldConfig": {"defaults": {"unit": "Bps"}}
    }
  ],
  "refresh": "30s",
  "schemaVersion": 38,
  "editable": true,
  "graphTooltip": 1
}
