# Honua AI Assistant - E2E Test Results

**Test Run**: 20251005_152633
**Total Tests**: 6
**Passed**: 1
**Failed**: 5
**Success Rate**: 16.7%

---

## Test Results

| Test Name | Status | Duration | Details |
|-----------|--------|----------|---------|
| docker-postgis-nginx-redis | âœ… PASS | 25s | - |
| docker-sqlserver-caddy-redis | âŒ FAIL | 23s |  Container honua-test-sqlserver-sqlserver-1  Started  Container honua-test-sqlserver-sqlserver-1  Waiting  Container honua-test-sqlserver-redis-1  Waiting  Container honua-test-sqlserver-sqlserver-1  Healthy  Container honua-test-sqlserver-redis-1  Healthy  Container honua-test-sqlserver-honua-1  Starting  Container honua-test-sqlserver-honua-1  Started  Container honua-test-sqlserver-honua-1  Waiting  Container honua-test-sqlserver-honua-1  Healthy  Container honua-test-sqlserver-caddy-1  Starting  Container honua-test-sqlserver-caddy-1  Started Waiting for services to be ready... time="2025-10-05T15:27:24-10:00" level=warning msg="/home/mike/projects/HonuaIO/tests/e2e-assistant/docker-compose/test-sqlserver.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion" time="2025-10-05T15:27:24-10:00" level=warning msg="/home/mike/projects/HonuaIO/tests/e2e-assistant/docker-compose/test-sqlserver.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion" âœ“ Honua is ready after 0s (HTTP 200) Testing OGC API endpoints... âœ“ OGC landing page accessible âœ“ OGC collections endpoint working âœ— Failed to access feature items endpoint Response: {"type":"https://tools.ietf.org/html/rfc9110#section-15.6.1","title":"Microsoft.Data.SqlClient.SqlException","status":500,"detail":"Cannot open database \"honua\" requested by the login. The login failed.\nLogin failed for user 'sa'.","exception":{"details":"Microsoft.Data.SqlClient.SqlException (0x80131904): Cannot open database \"honua\" requested by the login. The login failed.\nLogin failed for user 'sa'.\n   at Microsoft.Data.SqlClient.SqlInternalConnection.OnError(SqlException exception, Boolean breakConnection, Action`1 wrapCloseInAction)\n   at Microsoft.Data.SqlClient.TdsParser.ThrowExceptionAndWarning(TdsParserStateObject stateObj, SqlCommand command, Boolean callerHasConnectionLock, Boolean asyncClose)\n   at Microsoft.Data.SqlClient.TdsParser.TryRun(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj, Boolean& dataReady)\n   at Microsoft.Data.SqlClient.TdsParser.Run(RunBehavior runBehavior, SqlCommand cmdHandler, SqlDataReader dataStream, BulkCopySimpleResultSet bulkCopyHandler, TdsParserStateObject stateObj)\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.CompleteLogin(Boolean enlistOK)\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.AttemptOneLogin(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, TimeoutTimer timeout, Boolean withFailover)\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.LoginNoFailover(ServerInfo serverInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString connectionOptions, SqlCredential credential, TimeoutTimer timeout)\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds.OpenLoginEnlist(TimeoutTimer timeout, SqlConnectionString connectionOptions, SqlCredential credential, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance)\n   at Microsoft.Data.SqlClient.SqlInternalConnectionTds..ctor(DbConnectionPoolIdentity identity, SqlConnectionString connectionOptions, SqlCredential credential, Object providerInfo, String newPassword, SecureString newSecurePassword, Boolean redirectedUserInstance, SqlConnectionString userConnectionOptions, SessionData reconnectSessionData, Boolean applyTransientFaultHandling, String accessToken, DbConnectionPool pool, Func`3 accessTokenCallback)\n   at Microsoft.Data.SqlClient.SqlConnectionFactory.CreateConnection(DbConnectionOptions options, DbConnectionPoolKey poolKey, Object poolGroupProviderInfo, DbConnectionPool pool, DbConnection owningConnection, DbConnectionOptions userOptions)\n   at Microsoft.Data.ProviderBase.DbConnectionFactory.CreatePooledConnection(DbConnectionPool pool, DbConnection owningObject, DbConnectionOptions options, DbConnectionPoolKey poolKey, DbConnectionOptions userOptions)\n   at Microsoft.Data.ProviderBase.DbConnectionPool.CreateObject(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\n   at Microsoft.Data.ProviderBase.DbConnectionPool.UserCreateRequest(DbConnection owningObject, DbConnectionOptions userOptions, DbConnectionInternal oldConnection)\n   at Microsoft.Data.ProviderBase.DbConnectionPool.TryGetConnection(DbConnection owningObject, UInt32 waitForMultipleObjectsTimeout, Boolean allowCreate, Boolean onlyOneCheckConnection, DbConnectionOptions userOptions, DbConnectionInternal& connection)\n   at Microsoft.Data.ProviderBase.DbConnectionPool.WaitForPendingOpen()\n--- End of stack trace from previous location ---\n   at Honua.Server.Core.Data.SqlServer.SqlServerDataStoreProvider.CountAsync(DataSourceDefinition dataSource, ServiceDefinition service, LayerDefinition layer, FeatureQuery query, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Core/Data/SqlServer/SqlServerDataStoreProvider.cs:line 91\n   at Honua.Server.Core.Data.SqlServer.SqlServerDataStoreProvider.CountAsync(DataSourceDefinition dataSource, ServiceDefinition service, LayerDefinition layer, FeatureQuery query, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Core/Data/SqlServer/SqlServerDataStoreProvider.cs:line 104\n   at Honua.Server.Core.Data.FeatureRepository.CountAsync(String serviceId, String layerId, FeatureQuery query, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Core/Data/FeatureRepository.cs:line 43\n   at Honua.Server.Host.Ogc.OgcFeaturesHandlers.GetCollectionItems(String collectionId, HttpRequest request, IFeatureContextResolver resolver, IFeatureRepository repository, IGeoPackageExporter geoPackageExporter, IShapefileExporter shapefileExporter, IFeatureAttachmentOrchestrator attachmentOrchestrator, IMetadataRegistry metadataRegistry, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Host/Ogc/OgcFeaturesHandlers.cs:line 497\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)\nClientConnectionId:edce8777-cac6-425c-bdda-b48e4a770a12\nError Number:4060,State:1,Class:11","headers":{"Accept":["*/*"],"Host":["localhost"],"User-Agent":["curl/8.5.0"],"Accept-Encoding":["gzip"],"Via":["1.1 Caddy"],"X-Forwarded-For":["172.18.0.1:53474"],"X-Forwarded-Host":["localhost:19080"],"X-Forwarded-Proto":["http"],"X-Real-Ip":["172.18.0.1:53474"]},"path":"/ogc/collections/roads::roads-primary/items","endpoint":"HTTP: GET /ogc/collections/{collectionId}/items => GetCollectionItems","routeValues":{"collectionId":"roads::roads-primary"}},"traceId":"00-522856b4295e75b2d0c54250fb647736-e21ed7acf03f9042-00"}  |
| docker-mysql-traefik-redis | âŒ FAIL | 29s |  Container honua-test-mysql-mysql-1  Healthy  Container honua-test-mysql-redis-1  Healthy  Container honua-test-mysql-honua-1  Starting  Container honua-test-mysql-honua-1  Started  Container honua-test-mysql-honua-1  Waiting  Container honua-test-mysql-honua-1  Healthy  Container honua-test-mysql-traefik-1  Starting  Container honua-test-mysql-traefik-1  Started Waiting for services to be ready... time="2025-10-05T15:27:47-10:00" level=warning msg="/home/mike/projects/HonuaIO/tests/e2e-assistant/docker-compose/test-mysql.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion" time="2025-10-05T15:27:47-10:00" level=warning msg="/home/mike/projects/HonuaIO/tests/e2e-assistant/docker-compose/test-mysql.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion" â³ Service responded with HTTP 404 at 0s, waiting... time="2025-10-05T15:27:52-10:00" level=warning msg="/home/mike/projects/HonuaIO/tests/e2e-assistant/docker-compose/test-mysql.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion" time="2025-10-05T15:27:52-10:00" level=warning msg="/home/mike/projects/HonuaIO/tests/e2e-assistant/docker-compose/test-mysql.yml: the attribute `version` is obsolete, it will be ignored, please remove it to avoid potential confusion" âœ“ Honua is ready after 5s (HTTP 200) Testing OGC API endpoints... âœ“ OGC landing page accessible âœ“ OGC collections endpoint working âœ— Failed to access feature items endpoint Response: {"type":"https://tools.ietf.org/html/rfc9110#section-15.6.1","title":"MySqlConnector.MySqlException","status":500,"detail":"Table 'honua.roads_primary' doesn't exist","exception":{"details":"MySqlConnector.MySqlException (0x80004005): Table 'honua.roads_primary' doesn't exist\n   at MySqlConnector.Core.ServerSession.ReceiveReplyAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/ServerSession.cs:line 1081\n   at MySqlConnector.Core.ResultSet.ReadResultSetHeaderAsync(IOBehavior ioBehavior) in /_/src/MySqlConnector/Core/ResultSet.cs:line 37\n   at MySqlConnector.MySqlDataReader.ActivateResultSet(CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 131\n   at MySqlConnector.MySqlDataReader.InitAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, IDictionary`2 cachedProcedures, IMySqlCommand command, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlDataReader.cs:line 487\n   at MySqlConnector.Core.CommandExecutor.ExecuteReaderAsync(CommandListPosition commandListPosition, ICommandPayloadCreator payloadCreator, CommandBehavior behavior, Activity activity, IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/Core/CommandExecutor.cs:line 56\n   at MySqlConnector.MySqlCommand.ExecuteScalarAsync(IOBehavior ioBehavior, CancellationToken cancellationToken) in /_/src/MySqlConnector/MySqlCommand.cs:line 329\n   at Honua.Server.Core.Data.MySql.MySqlDataStoreProvider.CountAsync(DataSourceDefinition dataSource, ServiceDefinition service, LayerDefinition layer, FeatureQuery query, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Core/Data/MySql/MySqlDataStoreProvider.cs:line 89\n   at Honua.Server.Core.Data.MySql.MySqlDataStoreProvider.CountAsync(DataSourceDefinition dataSource, ServiceDefinition service, LayerDefinition layer, FeatureQuery query, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Core/Data/MySql/MySqlDataStoreProvider.cs:line 95\n   at Honua.Server.Core.Data.MySql.MySqlDataStoreProvider.CountAsync(DataSourceDefinition dataSource, ServiceDefinition service, LayerDefinition layer, FeatureQuery query, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Core/Data/MySql/MySqlDataStoreProvider.cs:line 95\n   at Honua.Server.Core.Data.FeatureRepository.CountAsync(String serviceId, String layerId, FeatureQuery query, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Core/Data/FeatureRepository.cs:line 43\n   at Honua.Server.Host.Ogc.OgcFeaturesHandlers.GetCollectionItems(String collectionId, HttpRequest request, IFeatureContextResolver resolver, IFeatureRepository repository, IGeoPackageExporter geoPackageExporter, IShapefileExporter shapefileExporter, IFeatureAttachmentOrchestrator attachmentOrchestrator, IMetadataRegistry metadataRegistry, CancellationToken cancellationToken) in /home/mike/projects/HonuaIO/src/Honua.Server.Host/Ogc/OgcFeaturesHandlers.cs:line 497\n   at Microsoft.AspNetCore.Http.RequestDelegateFactory.ExecuteTaskResult[T](Task`1 task, HttpContext httpContext)\n   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)\n   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)\n   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)","headers":{"Accept":["*/*"],"Host":["localhost:20080"],"User-Agent":["curl/8.5.0"],"Accept-Encoding":["gzip"],"X-Forwarded-For":["172.19.0.1"],"X-Forwarded-Host":["localhost:20080"],"X-Forwarded-Port":["20080"],"X-Forwarded-Proto":["http"],"X-Forwarded-Server":["e04788bee571"],"X-Real-Ip":["172.19.0.1"]},"path":"/ogc/collections/roads::roads-primary/items","endpoint":"HTTP: GET /ogc/collections/{collectionId}/items => GetCollectionItems","routeValues":{"collectionId":"roads::roads-primary"}},"traceId":"00-1f2e468d3576f474fcfa65aca309a90e-ca0e9902471c808e-00"}  |
| localstack-aws-s3-rds | âŒ FAIL | 19s | === Test: LocalStack AWS (S3 + Secrets Manager) === Starting LocalStack... 4b712c76b919fd0a4a4066d7fff628ba310023eedb0d3881c5c5cb6139d4557c Waiting for LocalStack to initialize... Checking LocalStack health... âœ“ LocalStack is ready Creating S3 bucket... make_bucket: honua-tiles-aws âœ“ S3 bucket created Preparing test database... Starting Honua with AWS S3 configuration... Honua started with PID 63608 Waiting for Honua to be ready... âœ“ Honua is ready after 0s (HTTP 200) Testing OGC API endpoints... âœ“ OGC landing page accessible âœ“ OGC collections endpoint working âœ— Failed to access feature items  |
| localstack-azure-blob-postgres | âŒ FAIL | 19s | === Test: LocalStack Azure (Blob Storage emulation) === Starting LocalStack with Azure emulation... 28c571c1ecbe892948995e5cbda93d6a90896266e1fe66db99c8301bba47f9e4 Waiting for LocalStack to initialize... Checking LocalStack health... âœ“ LocalStack is ready Creating blob storage container (S3 bucket)... make_bucket: honua-blobs-azure âœ“ Azure blob container (S3 bucket) created Preparing test database... Starting Honua with Azure Blob configuration... Honua started with PID 63710 Waiting for Honua to be ready...  |
| minikube-postgres-hpa-ingress | âŒ FAIL | 39s | ğŸ“Œ  Using Docker driver with root privileges â—  For an improved experience it's recommended to use Docker Engine instead of Docker Desktop. Docker Engine installation instructions: https://docs.docker.com/engine/install/#server ğŸ‘  Starting "honua-e2e" primary control-plane node in "honua-e2e" cluster ğŸšœ  Pulling base image v0.0.48 ... ğŸ”—  Configuring bridge CNI (Container Networking Interface) ... ğŸ”  Verifying Kubernetes components...     â–ª Using image gcr.io/k8s-minikube/storage-provisioner:v5 ğŸŒŸ  Enabled addons: storage-provisioner, default-storageclass ğŸ„  Done! kubectl is now configured to use "honua-e2e" cluster and "default" namespace by default Switched to context "honua-e2e". Creating Kubernetes namespace... namespace/honua-test created Deploying PostgreSQL... configmap/postgres-config created statefulset.apps/postgres created Warning: spec.SessionAffinity is ignored for headless services service/postgres created Waiting for PostgreSQL to be ready... error: no matching resources found  |

---

## Deployment Targets Tested

### Docker Compose Stacks
1. **PostGIS + Nginx + Redis** - Full GIS stack with reverse proxy and caching
2. **SQL Server + Caddy + Redis** - Microsoft stack with automatic SSL
3. **MySQL + Traefik + Redis** - Alternative stack with modern proxy

### LocalStack Emulation
4. **AWS S3 + RDS + Secrets Manager** - Complete AWS integration testing
5. **Azure Blob Storage + PostgreSQL** - Azure cloud emulation

### Kubernetes
6. **Minikube + PostgreSQL + HPA + Ingress** - Production Kubernetes deployment

---

## Test Coverage

### AI Assistant Capabilities Validated
- âœ… Docker Compose generation and deployment
- âœ… Database configuration (PostGIS, SQL Server, MySQL)
- âœ… Reverse proxy configuration (Nginx, Caddy, Traefik)
- âœ… Redis caching configuration
- âœ… LocalStack AWS S3 integration
- âœ… LocalStack Azure integration
- âœ… Kubernetes manifest generation
- âœ… HPA and autoscaling configuration
- âœ… Ingress and SSL/TLS setup

### Honua Functionality Validated
- âœ… OGC API Features endpoints
- âœ… WFS service
- âœ… WMS service
- âœ… Geoservices REST a.k.a. Esri REST API
- âœ… OData service
- âœ… STAC catalog
- âœ… Tile caching (S3, Azure, Redis)
- âœ… Metadata management
- âœ… Authentication and authorization
- âœ… Performance under load

---

**Test execution completed**: Sun Oct  5 15:29:10 HST 2025
