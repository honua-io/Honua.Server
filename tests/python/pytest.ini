[pytest]
# Parallel execution configuration
addopts = 
    -v
    --tb=short
    --strict-markers
    --disable-warnings
    -ra
    # Parallel execution: auto-detect CPU cores for optimal performance
    -n auto
    # Distribute tests by file for better parallelism
    --dist loadfile
    # Show test durations to identify slow tests
    --durations=10
    # Continue on first failure (remove to stop on first failure)
    --maxfail=1000

# Test discovery patterns
python_files = test_*.py *_test.py
python_classes = Test*
python_functions = test_*

# Minimum Python version
minversion = 3.10

# Test paths
testpaths = .

# Markers for selective test execution
markers =
    slow: marks tests as slow (deselect with '-m "not slow"')
    integration: marks tests as integration tests
    unit: marks tests as unit tests
    ogc: OGC API tests (Features, Tiles, Processes, etc.)
    wms: WMS service tests
    wfs: WFS service tests
    wmts: WMTS service tests
    wcs: WCS service tests
    csw: CSW service tests
    stac: STAC API tests
    geoservices: GeoServices (ArcGIS REST) tests
    carto: Carto/Mapbox Vector Tiles tests
    xyz: XYZ Tile tests
    openrosa: OpenRosa/ODK tests
    sensorthings: SensorThings API tests
    requires_postgres: tests requiring PostgreSQL
    requires_redis: tests requiring Redis
    requires_qdrant: tests requiring Qdrant

# Logging
log_cli = false
log_cli_level = INFO
log_file = pytest.log
log_file_level = DEBUG

# Coverage (if using pytest-cov)
# [coverage:run]
# omit = 
#     */tests/*
#     */conftest.py

# Timeout for tests (requires pytest-timeout)
# timeout = 30
# timeout_method = thread

# Parallel execution tuning for high-performance laptop
# pytest-xdist will use all available cores by default with -n auto
# To limit cores: use -n 8 (for 8 workers)
# For your laptop, -n auto should maximize throughput
