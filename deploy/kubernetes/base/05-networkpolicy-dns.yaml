---
# DNS Network Policy
# This policy allows DNS traffic from all pods in the namespace to kube-dns/CoreDNS.
# This is a convenience policy to avoid repeating DNS rules in every policy.
#
# Note: This can be removed if DNS egress is included in individual policies.

apiVersion: networking.k8s.io/v1
kind: NetworkPolicy
metadata:
  name: allow-dns-access
  namespace: honua
  labels:
    app: honua
    component: network-policy
    policy-type: infrastructure
  annotations:
    description: "Allow DNS lookups for all pods"
    security.policy: "dns-access"
    priority: "5"

spec:
  # Apply to all pods in the namespace
  podSelector: {}

  policyTypes:
  - Egress

  egress:
  # Allow UDP and TCP DNS queries to kube-dns/CoreDNS
  - to:
    - namespaceSelector:
        matchLabels:
          name: kube-system
    ports:
    - protocol: UDP
      port: 53
    - protocol: TCP
      port: 53
