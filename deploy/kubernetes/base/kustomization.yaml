# Kustomize configuration for Honua NetworkPolicies
#
# This file allows deploying all NetworkPolicies using kustomize:
#   kubectl apply -k deploy/kubernetes/base/
#
# Or with specific overlays:
#   kubectl apply -k deploy/kubernetes/overlays/production/

apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

namespace: honua

resources:
  # Namespace must be created first
  - 00-namespace.yaml

  # NetworkPolicies deployed in order
  # Note: DNS and namespace isolation before default deny
  - 05-networkpolicy-dns.yaml
  - 06-networkpolicy-namespace-isolation.yaml
  - 02-networkpolicy-honua-server.yaml
  - 03-networkpolicy-postgresql.yaml
  - 04-networkpolicy-redis.yaml

  # Default deny applied last
  - 01-networkpolicy-default-deny.yaml

commonLabels:
  security.policy: network-restricted
  managed-by: kustomize

commonAnnotations:
  documentation: "See deploy/kubernetes/base/NETWORK_ARCHITECTURE.md"
