apiVersion: v1
kind: ConfigMap
metadata:
  name: honua-config
  namespace: honua
  labels:
    app.kubernetes.io/name: honua
    app.kubernetes.io/component: configuration
    environment: production
data:
  # Application Settings
  ASPNETCORE_ENVIRONMENT: "Production"
  ASPNETCORE_URLS: "http://+:8080"
  ASPNETCORE_FORWARDEDHEADERS_ENABLED: "true"

  # Database Configuration
  HONUA__DATABASE__PROVIDER: "PostgreSQL"
  HONUA__DATABASE__HOST: "postgis-service"
  HONUA__DATABASE__PORT: "5432"
  HONUA__DATABASE__DATABASE: "honua"

  # Cache Configuration
  HONUA__CACHE__PROVIDER: "Redis"
  HONUA__CACHE__REDIS__HOST: "redis-service"
  HONUA__CACHE__REDIS__PORT: "6379"
  HONUA__CACHE__REDIS__SSL: "true"
  HONUA__CACHE__REDIS__CONNECTTIMEOUT: "5000"
  HONUA__CACHE__REDIS__SYNCTIMEOUT: "5000"

  # Authentication Configuration
  HONUA__AUTHENTICATION__MODE: "Local"
  HONUA__AUTHENTICATION__ENFORCE: "true"
  HONUA__AUTHENTICATION__QUICKSTART__ENABLED: "false"
  HONUA__AUTHENTICATION__LOCAL__SESSIONLIFETIME: "08:00:00"
  HONUA__AUTHENTICATION__LOCAL__MINPASSWORDLENGTH: "16"
  HONUA__AUTHENTICATION__LOCAL__REQUIREUPPERCASE: "true"
  HONUA__AUTHENTICATION__LOCAL__REQUIRELOWERCASE: "true"
  HONUA__AUTHENTICATION__LOCAL__REQUIREDIGIT: "true"
  HONUA__AUTHENTICATION__LOCAL__REQUIRESPECIALCHARACTER: "true"
  HONUA__AUTHENTICATION__LOCAL__MAXFAILEDATTEMPTS: "5"
  HONUA__AUTHENTICATION__LOCAL__LOCKOUTDURATION: "00:15:00"

  # OData Configuration
  HONUA__ODATA__ENABLED: "true"
  HONUA__ODATA__ALLOWWRITES: "false"
  HONUA__ODATA__DEFAULTPAGESIZE: "100"
  HONUA__ODATA__MAXPAGESIZE: "1000"

  # CORS Configuration
  HONUA__CORS__ALLOWANYORIGIN: "false"
  HONUA__CORS__ALLOWCREDENTIALS: "true"

  # Observability Configuration
  OBSERVABILITY__LOGGING__JSONCONSOLE: "true"
  OBSERVABILITY__LOGGING__INCLUDESCOPES: "true"
  OBSERVABILITY__METRICS__ENABLED: "true"
  OBSERVABILITY__METRICS__ENDPOINT: "/metrics"
  OBSERVABILITY__METRICS__USEPROMETHEUS: "true"
  OBSERVABILITY__TRACING__EXPORTER: "otlp"
  OBSERVABILITY__REQUESTLOGGING__ENABLED: "true"
  OBSERVABILITY__REQUESTLOGGING__LOGHEADERS: "false"
  OBSERVABILITY__REQUESTLOGGING__SLOWTHRESHOLDMS: "5000"

  # Rate Limiting
  RATELIMITING__ENABLED: "true"
  RATELIMITING__DEFAULT__PERMITLIMIT: "100"
  RATELIMITING__DEFAULT__WINDOWMINUTES: "1"

  # Performance Settings
  PERFORMANCE__RESPONSECACHE__MAXSIZEMB: "100"
  PERFORMANCE__MEMORYCACHE__MAXSIZEMB: "200"
  PERFORMANCE__MEMORYCACHE__COMPACTIONPERCENTAGE: "0.25"

  # Schema Validation
  SCHEMAVALIDATION__ENABLED: "true"
  SCHEMAVALIDATION__FAILONERROR: "false"
  SCHEMAVALIDATION__AUTOSYNCSCHEMA: "true"

  # Request Limits
  REQUESTLIMITS__MAXBODYSIZE: "1073741824"
