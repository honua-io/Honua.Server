# ============================================================================
# Terraform Backend Configuration - Multi-Region Deployment
# ============================================================================
# This file configures remote state storage with state locking for the
# multi-region deployment.
#
# Prerequisites:
#   1. Deploy state backend infrastructure (choose AWS or Azure):
#      AWS: cd ../state-backend/aws && terraform apply
#      Azure: cd ../state-backend/azure && terraform apply
#   2. Copy this file: cp backend.tf.example backend.tf
#   3. Uncomment the appropriate backend section below
#   4. Update values with outputs from state backend deployment
#   5. Run: terraform init -migrate-state
# ============================================================================

# ============================================================================
# Option 1: AWS Backend (S3 + DynamoDB)
# ============================================================================
# Uncomment this block if using AWS for state storage

# terraform {
#   backend "s3" {
#     # S3 bucket for state storage
#     bucket = "honua-terraform-state-123456789012-us-east-1"
#
#     # Path to state file within bucket
#     key = "multi-region/terraform.tfstate"
#
#     # AWS region where state bucket is located
#     region = "us-east-1"
#
#     # Enable server-side encryption
#     encrypt = true
#
#     # DynamoDB table for state locking
#     dynamodb_table = "honua-terraform-locks"
#   }
# }

# ============================================================================
# Option 2: Azure Backend (Storage Account + Blob Leases)
# ============================================================================
# Uncomment this block if using Azure for state storage

# terraform {
#   backend "azurerm" {
#     # Resource group containing the storage account
#     resource_group_name = "rg-honua-tfstate-shared"
#
#     # Storage account for state storage
#     storage_account_name = "sthonuatfstatea1b2c3"
#
#     # Container name for state files
#     container_name = "tfstate"
#
#     # Path to state file within container
#     key = "multi-region/terraform.tfstate"
#   }
# }

# ============================================================================
# Workspace-Specific State Files
# ============================================================================
# If using Terraform workspaces for different environments:
#
# terraform workspace new dev
# terraform workspace new staging
# terraform workspace new prod
#
# State files will be stored at:
#   AWS: s3://bucket/env:/dev/multi-region/terraform.tfstate
#   Azure: tfstate/env:/dev/multi-region/terraform.tfstate
#
# This allows you to manage multiple environments with the same configuration
# ============================================================================

# ============================================================================
# State Locking
# ============================================================================
# State locking is automatic:
#   - AWS: Uses DynamoDB table for distributed locking
#   - Azure: Uses blob leases (built into Azure Storage)
#
# Both prevent concurrent modifications to state files
# No additional configuration needed!
# ============================================================================
