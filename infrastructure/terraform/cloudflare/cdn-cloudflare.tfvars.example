# ============================================================================
# Cloudflare CDN Configuration Example
# ============================================================================
# Copy this file to cdn-cloudflare.tfvars and customize for your deployment
# Usage: terraform apply -var-file="cdn-cloudflare.tfvars"
# ============================================================================

# Cloudflare API Token
# Create at: https://dash.cloudflare.com/profile/api-tokens
# Required permissions: Zone.Edit
cloudflare_api_token = "your-cloudflare-api-token-here"

# Zone Name
# Your domain registered in Cloudflare
zone_name = "honua.io"

# Subdomain
# Subdomain for CDN endpoint (e.g., tiles.honua.io)
subdomain = "tiles"

# Origin Configuration
# Your Honua server hostname or IP
origin_hostname = "honua-server.example.com"

# WAF Configuration
# Enable Cloudflare Web Application Firewall
# Requires: Pro plan or higher
enable_waf = true

# Argo Smart Routing
# Intelligent routing for faster performance
# Requires: Business plan or higher
enable_argo = false

# Rate Limiting
# Enable rate limiting rules
# Basic rate limiting: All plans
# Advanced rules: Enterprise plan
enable_rate_limiting = true

# SSL Mode
# - off: No encryption between Cloudflare and origin
# - flexible: Cloudflare to client encrypted, origin unencrypted
# - full: Encrypted end-to-end, origin cert can be self-signed
# - strict: Encrypted end-to-end, origin cert must be valid
ssl_mode = "full"

# Minimum TLS Version
# - "1.0", "1.1", "1.2", "1.3"
min_tls_version = "1.2"

# Environment
# Used for resource naming and tagging
environment = "prod"

# ============================================================================
# Example Configurations by Use Case
# ============================================================================

# Example 1: Production (Business Plan)
# cloudflare_api_token     = "your-token-here"
# zone_name                = "honua.io"
# subdomain                = "tiles"
# origin_hostname          = "honua-server.example.com"
# enable_waf               = true
# enable_argo              = true  # Business plan
# enable_rate_limiting     = true
# ssl_mode                 = "strict"
# min_tls_version          = "1.2"
# environment              = "prod"

# Example 2: Production (Pro Plan)
# cloudflare_api_token     = "your-token-here"
# zone_name                = "honua.io"
# subdomain                = "tiles"
# origin_hostname          = "honua-server.example.com"
# enable_waf               = true
# enable_argo              = false  # Requires Business
# enable_rate_limiting     = true
# ssl_mode                 = "full"
# min_tls_version          = "1.2"
# environment              = "prod"

# Example 3: Free Plan (No WAF, No Argo)
# cloudflare_api_token     = "your-token-here"
# zone_name                = "honua.io"
# subdomain                = "tiles"
# origin_hostname          = "honua-server.example.com"
# enable_waf               = false  # Requires Pro+
# enable_argo              = false  # Requires Business+
# enable_rate_limiting     = true   # Basic rate limiting available
# ssl_mode                 = "full"
# min_tls_version          = "1.2"
# environment              = "prod"

# Example 4: Development/Staging
# cloudflare_api_token     = "your-token-here"
# zone_name                = "honua-io"
# subdomain                = "tiles-dev"
# origin_hostname          = "honua-dev.example.com"
# enable_waf               = false
# enable_argo              = false
# enable_rate_limiting     = false
# ssl_mode                 = "flexible"
# min_tls_version          = "1.2"
# environment              = "dev"

# ============================================================================
# Cost Estimates (Monthly)
# ============================================================================
#
# Free Plan:
#   - Cost: $0/month
#   - Features: Basic DDoS, Universal SSL, caching
#   - Limitations: No WAF, no Argo, limited rate limiting
#   - Bandwidth: Unlimited (FREE!)
#
# Pro Plan ($20/month):
#   - WAF: Included
#   - Image optimization: Included
#   - Mobile optimization: Included
#   - 20+ firewall rules
#   - Bandwidth: Unlimited (FREE!)
#
# Business Plan ($200/month):
#   - Everything in Pro
#   - Argo Smart Routing: Included
#   - 50+ firewall rules
#   - Prioritized email support
#   - Bandwidth: Unlimited (FREE!)
#
# Enterprise Plan (Contact Sales):
#   - Everything in Business
#   - 1,000+ firewall rules
#   - Dedicated support
#   - Custom SSL certificates
#   - Advanced DDoS protection
#
# Cache Purge: FREE (unlimited)
#
# ============================================================================
# Notes
# ============================================================================
#
# 1. API Token Creation:
#    - Dashboard → My Profile → API Tokens → Create Token
#    - Use "Edit zone DNS" template
#    - Scope to specific zone for security
#
# 2. DNS Configuration:
#    - Cloudflare must be your DNS provider (nameservers)
#    - If not already using Cloudflare DNS:
#      a. Add site to Cloudflare
#      b. Update nameservers at registrar
#      c. Wait for activation (24-48 hours max)
#
# 3. Orange Cloud (Proxy):
#    - DNS record must be proxied (orange cloud)
#    - This enables caching, WAF, and other features
#
# 4. SSL Modes:
#    - Flexible: Quick setup, less secure (not recommended for prod)
#    - Full: Good balance, works with self-signed origin certs
#    - Strict: Most secure, requires valid origin cert
#
# 5. Page Rules vs Cache Rules:
#    - Page Rules: Legacy, 3 rules on Free plan, 20 on Pro
#    - Cache Rules: Modern, more powerful, recommended
#    - Terraform includes both for compatibility
#
# 6. Rate Limiting:
#    - Free/Pro: Basic rate limiting (10 rules)
#    - Business/Enterprise: Advanced rate limiting (unlimited)
#
# 7. WAF Managed Rules:
#    - Cloudflare Managed Ruleset: Core WAF rules
#    - OWASP Core Ruleset: Web app attack protection
#    - Customizable sensitivity levels
#
# 8. Argo Smart Routing:
#    - Uses Cloudflare's private backbone
#    - Reduces latency by ~30% on average
#    - Requires Business plan ($200/month)
#
# 9. Workers (Optional):
#    - Advanced caching logic
#    - Edge compute
#    - 100,000 requests/day free, then $0.50/million
#
# 10. Analytics:
#     - Free: Last 24 hours
#     - Pro+: Last 30 days
#     - Enterprise: Unlimited history
#
# ============================================================================
# Recommended Plans by Use Case
# ============================================================================
#
# Hobby/Personal Projects:
#   - Free plan
#   - enable_waf = false
#   - enable_argo = false
#
# Small Business:
#   - Pro plan ($20/month)
#   - enable_waf = true
#   - enable_argo = false
#
# Medium Business:
#   - Business plan ($200/month)
#   - enable_waf = true
#   - enable_argo = true
#
# Enterprise:
#   - Enterprise plan (contact sales)
#   - All features enabled
#   - Custom configuration
#
# ============================================================================
