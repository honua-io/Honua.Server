{
  "_comment": "Sensor Anomaly Detection Configuration Example",
  "_description": "This file shows all available configuration options for sensor anomaly detection",

  "Honua": {
    "Enterprise": {
      "SensorThings": {
        "AnomalyDetection": {
          "_comment": "Global enable/disable for anomaly detection",
          "Enabled": true,

          "_checkInterval_comment": "How often to run anomaly detection checks (format: HH:MM:SS or D.HH:MM:SS)",
          "CheckInterval": "00:05:00",

          "StaleSensorDetection": {
            "_comment": "Detects sensors that have not reported data within expected timeframe",
            "Enabled": true,

            "_staleThreshold_comment": "Default threshold - sensor is stale if no data received in this time",
            "StaleThreshold": "01:00:00",

            "_thresholdOverrides_comment": "Custom thresholds per observed property type",
            "ThresholdOverrides": {
              "_examples": "Keys are ObservedProperty names, values are time durations",
              "temperature": "02:00:00",
              "traffic_count": "00:30:00",
              "air_quality": "00:15:00",
              "water_level": "00:45:00"
            }
          },

          "UnusualReadingDetection": {
            "_comment": "Detects readings that are statistical outliers using standard deviation",
            "Enabled": true,

            "_standardDeviationThreshold_comment": "Number of std deviations from mean to flag as anomaly (3 = 99.7% of normal distribution)",
            "StandardDeviationThreshold": 3.0,

            "_minimumObservationCount_comment": "Minimum observations needed before calculating statistics",
            "MinimumObservationCount": 10,

            "_statisticalWindow_comment": "Time window for calculating mean and std dev (rolling window)",
            "StatisticalWindow": "1.00:00:00",

            "_thresholdOverrides_comment": "Custom std dev thresholds per observed property",
            "ThresholdOverrides": {
              "_examples": "More sensitive detection for temperature (2.5 σ), less for wind (4.0 σ)",
              "temperature": 2.5,
              "humidity": 3.0,
              "wind_speed": 4.0
            },

            "_minimumCountOverrides_comment": "Custom minimum observation counts per observed property",
            "MinimumCountOverrides": {
              "_examples": "Need more data points for accurate wind speed statistics",
              "wind_speed": 20,
              "precipitation": 15
            }
          },

          "AlertDelivery": {
            "_comment": "Configuration for delivering anomaly alerts via webhooks",

            "_webhookUrl_comment": "Primary webhook URL for alerts (GeoEvent API or custom endpoint)",
            "WebhookUrl": "https://your-server.com/api/v1/geoevent/webhooks/anomalies",

            "_additionalWebhooks_comment": "Additional webhook URLs for redundant delivery",
            "AdditionalWebhooks": [
              "https://backup-server.com/webhooks/alerts",
              "https://monitoring.example.com/api/alerts"
            ],

            "_webhookTimeout_comment": "Timeout for webhook HTTP calls",
            "WebhookTimeout": "00:00:30",

            "_enableRetries_comment": "Whether to retry failed webhook deliveries",
            "EnableRetries": true,

            "_maxRetries_comment": "Maximum retry attempts for failed webhooks",
            "MaxRetries": 3,

            "_retryDelay_comment": "Delay between retry attempts",
            "RetryDelay": "00:00:05"
          },

          "RateLimit": {
            "_comment": "Prevents alert flooding by limiting alerts per time window",
            "Enabled": true,

            "_maxAlertsPerDatastream_comment": "Max alerts per datastream within rate limit window",
            "MaxAlertsPerDatastream": 5,

            "_rateLimitWindow_comment": "Time window for rate limiting",
            "RateLimitWindow": "01:00:00",

            "_maxTotalAlerts_comment": "Max total alerts across all sensors within window (global limit)",
            "MaxTotalAlerts": 100
          }
        }
      }
    }
  }
}
