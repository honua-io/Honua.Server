{
  "$schema": "./appsettings.schema.json",
  "GeoETL": {
    "Performance": {
      "// Engine Configuration": "Choose between sequential, parallel, or streaming execution",
      "EngineType": "Parallel",
      "MaxParallelNodes": 4,
      "StreamingEnabled": true,
      "BatchSize": 1000,
      "MaxMemoryPerWorkflowMB": 512,

      "// Caching Configuration": "Multi-level caching for improved performance",
      "Cache": {
        "Enabled": true,
        "Provider": "Memory",
        "DefaultTtlMinutes": 5,
        "MaxMemorySizeMB": 512,
        "RedisConnectionString": null,
        "KeyPrefix": "geoetl:",
        "// Cache TTLs": "Time-to-live for different cache types",
        "WorkflowDefinitionTtlMinutes": 5,
        "TemplateTtlMinutes": 15,
        "NodeRegistryTtlMinutes": 0,
        "FeatureSchemaTtlMinutes": 10
      },

      "// Database Optimization": "Connection pooling and batch operations",
      "Database": {
        "UseConnectionPooling": true,
        "MinPoolSize": 5,
        "MaxPoolSize": 100,
        "ConnectionIdleLifetimeSeconds": 300,
        "UsePreparedStatements": true,
        "DefaultBatchSize": 1000,
        "CommandTimeoutSeconds": 300,
        "// Bulk Operations": "Use COPY command for bulk inserts",
        "UseCopyForBulkInsert": true,
        "// Read Replicas": "Use read replicas for read-heavy operations",
        "UseReadReplicas": false,
        "ReadReplicaConnectionStrings": []
      },

      "// Memory Management": "Memory pooling and pressure management",
      "Memory": {
        "EnableObjectPooling": true,
        "MaxPoolSizePerType": 100,
        "EnableMemoryPressureManagement": true,
        "MaxMemoryMB": 2048,
        "TriggerGcThresholdPercentage": 80
      },

      "// Monitoring & Metrics": "Performance monitoring and telemetry",
      "Monitoring": {
        "EnableMetrics": true,
        "MetricsProvider": "OpenTelemetry",
        "EnableDetailedMetrics": false,
        "// Application Insights": "Azure Application Insights configuration",
        "ApplicationInsights": {
          "Enabled": false,
          "InstrumentationKey": null,
          "ConnectionString": null
        },
        "// Prometheus": "Prometheus metrics endpoint",
        "Prometheus": {
          "Enabled": true,
          "Port": 9090,
          "Path": "/metrics"
        }
      },

      "// Background Processing": "Queue-based background processing",
      "BackgroundProcessing": {
        "Enabled": false,
        "QueueProvider": "Memory",
        "// RabbitMQ": "RabbitMQ configuration",
        "RabbitMQ": {
          "Host": "localhost",
          "Port": 5672,
          "Username": "guest",
          "Password": "guest",
          "VirtualHost": "/",
          "QueueName": "geoetl-workflows"
        },
        "// Azure Service Bus": "Azure Service Bus configuration",
        "AzureServiceBus": {
          "ConnectionString": null,
          "QueueName": "geoetl-workflows"
        },
        "// Worker Configuration": "Background worker settings",
        "Workers": {
          "Count": 2,
          "MaxConcurrentWorkflows": 10
        }
      },

      "// Query Optimization": "Database query optimization",
      "QueryOptimization": {
        "// Indexes": "Automatically create recommended indexes",
        "AutoCreateIndexes": false,
        "// Partitioning": "Enable table partitioning by date",
        "EnablePartitioning": false,
        "PartitionByDays": 30,
        "// Vacuum": "Auto-vacuum configuration",
        "AutoVacuum": true,
        "VacuumThresholdRows": 50000
      },

      "// Geometry Optimization": "Spatial operations optimization",
      "Geometry": {
        "// Execution Tier": "Prefer PostGIS for complex operations",
        "PreferPostGis": true,
        "SimplifyThreshold": 0.0001,
        "UseSpatialIndexes": true,
        "BufferPoolSize": 100
      },

      "// Load Testing": "Load testing configuration",
      "LoadTesting": {
        "Enabled": false,
        "ConcurrentWorkflows": 100,
        "FeaturesPerWorkflow": 10000,
        "DurationMinutes": 10
      },

      "// Circuit Breaker": "Circuit breaker for external services",
      "CircuitBreaker": {
        "Enabled": true,
        "FailureThreshold": 5,
        "TimeoutSeconds": 30,
        "ResetTimeoutSeconds": 60
      },

      "// Rate Limiting": "API rate limiting",
      "RateLimit": {
        "Enabled": true,
        "RequestsPerMinute": 100,
        "ConcurrentRequests": 10
      },

      "// Compression": "Enable compression for large payloads",
      "Compression": {
        "Enabled": true,
        "MinimumSizeBytes": 1024,
        "CompressionLevel": "Fastest"
      }
    }
  }
}
