{
  "//": "Azure Event Grid configuration for Honua.Server",
  "//": "Enable this to publish geospatial events to Azure Event Grid",

  "Honua": {
    "EventGrid": {
      "//": "Set to true to enable Event Grid publishing",
      "Enabled": false,

      "//": "Azure Event Grid topic endpoint (get from Azure Portal)",
      "TopicEndpoint": "https://your-topic-name.westus-1.eventgrid.azure.net/api/events",

      "//": "Alternative: Use Event Grid domain for multi-topic scenarios",
      "DomainEndpoint": null,

      "//": "Authentication: Use Managed Identity (recommended) or Access Key",
      "UseManagedIdentity": true,
      "TopicKey": null,

      "//": "Performance settings",
      "MaxBatchSize": 100,
      "FlushIntervalSeconds": 10,
      "MaxQueueSize": 10000,
      "BackpressureMode": "Drop",

      "//": "Event filters (empty = publish all)",
      "EventTypeFilter": [
        "//": "Uncomment to filter by event type",
        "// honua.features.created",
        "// honua.features.updated",
        "// honua.sensor.observation.created",
        "// honua.geoevent.geofence.entered"
      ],

      "CollectionFilter": [
        "//": "Uncomment to filter by collection",
        "// parcels",
        "// buildings"
      ],

      "TenantFilter": [
        "//": "Uncomment to filter by tenant",
        "// tenant-production"
      ],

      "//": "Retry configuration",
      "Retry": {
        "MaxRetries": 3,
        "InitialDelaySeconds": 1,
        "MaxDelaySeconds": 30
      },

      "//": "Circuit breaker configuration",
      "CircuitBreaker": {
        "Enabled": true,
        "FailureThreshold": 5,
        "DurationOfBreakSeconds": 60,
        "SamplingDurationSeconds": 30,
        "MinimumThroughput": 10
      }
    }
  },

  "//": "Example: Production configuration",
  "//Honua": {
    "//EventGrid": {
      "//Enabled": true,
      "//TopicEndpoint": "https://honua-events-prod.westus-1.eventgrid.azure.net/api/events",
      "//UseManagedIdentity": true,
      "//MaxBatchSize": 500,
      "//FlushIntervalSeconds": 5,
      "//EventTypeFilter": ["honua.features.created", "honua.features.updated", "honua.sensor.observation.created"],
      "//CollectionFilter": ["parcels", "buildings", "sensors"],
      "//TenantFilter": ["production-tenant"]
    "//"}
  "//"},

  "//": "Example: Development configuration with access key",
  "//Honua": {
    "//EventGrid": {
      "//Enabled": true,
      "//TopicEndpoint": "https://honua-events-dev.westus-1.eventgrid.azure.net/api/events",
      "//UseManagedIdentity": false,
      "//TopicKey": "YOUR_ACCESS_KEY_FROM_AZURE_PORTAL",
      "//MaxBatchSize": 50,
      "//FlushIntervalSeconds": 30
    "//"}
  "//"}
}
