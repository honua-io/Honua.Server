{
  "$schema": "./appsettings.schema.json",
  "_comment": "Example configuration for OAuth 2.0 and OpenID Connect authentication",
  "_security_warning": "NEVER commit client secrets to source control. Use environment variables or Azure Key Vault.",

  "honua": {
    "authentication": {
      "mode": "Oidc",
      "enforce": true,

      "_comment_oidc": "Generic OpenID Connect Provider Configuration",
      "oidc": {
        "enabled": true,
        "authority": "https://auth.example.com",
        "clientId": "honua-server-client-id",
        "clientSecret": "***REPLACE_WITH_ENVIRONMENT_VARIABLE***",
        "responseType": "code",
        "saveTokens": true,
        "getClaimsFromUserInfoEndpoint": true,
        "scopes": ["openid", "profile", "email", "roles"],
        "allowedIssuers": [
          "https://auth.example.com"
        ],
        "roleClaimType": "roles",
        "requireHttpsMetadata": true,
        "callbackPath": "/signin-oidc",
        "signedOutCallbackPath": "/signout-callback-oidc",
        "usePkce": true
      },

      "_comment_azuread": "Azure Active Directory (Microsoft Entra ID) Configuration",
      "azureAd": {
        "enabled": false,
        "tenantId": "12345678-1234-1234-1234-123456789012",
        "clientId": "***REPLACE_WITH_AZURE_APP_ID***",
        "clientSecret": "***REPLACE_WITH_ENVIRONMENT_VARIABLE***",
        "instance": "https://login.microsoftonline.com/",
        "scopes": ["openid", "profile", "email"],
        "callbackPath": "/signin-azuread",
        "validateIssuer": true,
        "roleClaimType": "roles"
      },

      "_comment_google": "Google OAuth 2.0 Configuration",
      "google": {
        "enabled": false,
        "clientId": "***REPLACE_WITH_GOOGLE_CLIENT_ID***",
        "clientSecret": "***REPLACE_WITH_ENVIRONMENT_VARIABLE***",
        "scopes": ["openid", "profile", "email"],
        "callbackPath": "/signin-google"
      },

      "_comment_jwt": "JWT Bearer token configuration (for API access tokens)",
      "jwt": {
        "authority": "https://auth.example.com",
        "audience": "honua-api",
        "roleClaimPath": "roles",
        "requireHttpsMetadata": true
      }
    }
  },

  "_instructions": {
    "step1": "Choose your authentication provider (oidc, azureAd, or google)",
    "step2": "Set 'enabled: true' for your chosen provider(s)",
    "step3": "Replace ***REPLACE*** values with actual credentials",
    "step4": "Store secrets in environment variables or Azure Key Vault",
    "step5": "Update redirect URIs in your OIDC provider settings",

    "_environment_variables": {
      "description": "Use environment variables for secrets in production",
      "examples": {
        "oidc_client_secret": "honua__authentication__oidc__clientSecret",
        "azuread_client_secret": "honua__authentication__azureAd__clientSecret",
        "google_client_secret": "honua__authentication__google__clientSecret"
      }
    },

    "_redirect_uris": {
      "description": "Configure these redirect URIs in your OIDC provider",
      "oidc": [
        "https://your-domain.com/signin-oidc",
        "https://your-domain.com/signout-callback-oidc"
      ],
      "azuread": [
        "https://your-domain.com/signin-azuread"
      ],
      "google": [
        "https://your-domain.com/signin-google"
      ]
    },

    "_role_mapping": {
      "description": "Configure roles in your OIDC provider",
      "honua_roles": [
        "administrator - Full system access",
        "editor - Can edit data and metadata",
        "datapublisher - Can publish new datasets",
        "viewer - Read-only access"
      ],
      "azure_ad": "Configure App Roles in Azure AD App Registration",
      "google": "Roles are mapped based on email domain or custom claims",
      "okta": "Create groups: honua.administrator, honua.editor, etc."
    }
  }
}
