{
  // Example configuration for Filter Parsing Cache
  // This cache reduces parsing overhead for repeated CQL and CQL2-JSON filter expressions
  // by caching the parsed Abstract Syntax Tree (AST) with automatic invalidation on schema changes.

  "FilterParsingCache": {
    // Enable or disable filter parsing cache (default: true)
    // Set to false for debugging or troubleshooting filter parsing issues
    "Enabled": true,

    // Maximum number of cached filter entries (default: 10,000)
    // Uses LRU (Least Recently Used) eviction when limit is reached
    // Consider increasing for high-traffic deployments with many unique filters
    "MaxEntries": 10000,

    // Maximum total size of cached filters in bytes (default: 50 MB = 52,428,800 bytes)
    // Individual filters exceeding this size will not be cached
    // The cache will enforce BOTH MaxEntries and MaxSizeBytes limits
    "MaxSizeBytes": 52428800,

    // Sliding expiration time in minutes (default: 60 minutes)
    // Cached entries that are not accessed within this time will be evicted
    // Set higher for stable workloads, lower for dynamic filter patterns
    "SlidingExpirationMinutes": 60
  },

  // Performance recommendations by deployment size:

  // Small deployment (<1000 requests/day):
  // "MaxEntries": 1000,
  // "MaxSizeBytes": 10485760, // 10 MB
  // "SlidingExpirationMinutes": 30

  // Medium deployment (1000-10000 requests/day):
  // "MaxEntries": 10000,
  // "MaxSizeBytes": 52428800, // 50 MB
  // "SlidingExpirationMinutes": 60

  // Large deployment (>10000 requests/day):
  // "MaxEntries": 50000,
  // "MaxSizeBytes": 104857600, // 100 MB
  // "SlidingExpirationMinutes": 120

  // Cache effectiveness monitoring:
  // - View metrics at /metrics endpoint (Prometheus format)
  // - Key metrics:
  //   * honua.filter_cache.hits - Number of cache hits
  //   * honua.filter_cache.misses - Number of cache misses
  //   * honua.filter_cache.hit_rate - Cache hit rate (hits / total requests)
  //   * honua.filter_cache.parse_time - Histogram of parse times for cache misses
  //   * honua.filter_cache.time_saved_ms - Cumulative time saved by cache hits
  //   * honua.filter_cache.evictions - Number of cache evictions by reason

  // Cache key format:
  // "filter:{hash(filter_text)}:{layer_schema_hash}:{crs_hash}:{lang_hash}"
  //
  // The cache automatically invalidates entries when:
  // - Layer schema changes (fields added/removed/modified)
  // - Different CRS is used for spatial filters (CQL2-JSON)
  // - Different filter language is used
  // - Entry exceeds sliding expiration window
  // - Cache reaches capacity limits

  // Expected hit rates:
  // - Static filters (e.g., bbox queries): 80-95% hit rate
  // - Parameterized queries (e.g., user searches): 30-60% hit rate
  // - Unique filters per request: <10% hit rate (cache may not be beneficial)

  // Troubleshooting:
  // - Low hit rate: Check if filters vary significantly per request
  // - High eviction rate: Increase MaxEntries or MaxSizeBytes
  // - Memory pressure: Decrease MaxSizeBytes or MaxEntries
}
