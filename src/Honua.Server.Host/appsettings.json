{
  "TrustedProxies": [],
  "_ConnectionStrings_Comment": "Redis connection string must be configured in appsettings.Development.json or appsettings.Production.json",
  "Serilog": {
    "Using": [ "Serilog.Sinks.Console", "Serilog.Sinks.File", "Serilog.Sinks.Seq" ],
    "MinimumLevel": {
      "Default": "Information",
      "Override": {
        "Microsoft": "Warning",
        "Microsoft.AspNetCore": "Warning",
        "System": "Warning"
      }
    },
    "WriteTo": [
      {
        "Name": "Console",
        "Args": {
          "outputTemplate": "[{Timestamp:HH:mm:ss} {Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      },
      {
        "Name": "File",
        "Args": {
          "path": "logs/honua-.log",
          "rollingInterval": "Day",
          "retainedFileCountLimit": 30,
          "outputTemplate": "{Timestamp:yyyy-MM-dd HH:mm:ss.fff zzz} [{Level:u3}] {Message:lj} {Properties:j}{NewLine}{Exception}"
        }
      }
    ],
    "Enrich": [ "FromLogContext", "WithMachineName", "WithThreadId", "WithEnvironmentName" ],
    "Properties": {
      "Application": "Honua.Server"
    }
  },
  "Logging": {
    "LogLevel": {
      "Default": "Information",
      "Microsoft.AspNetCore": "Warning"
    }
  },
  "observability": {
    "logging": {
      "jsonConsole": true,
      "includeScopes": true
    },
    "metrics": {
      "enabled": false,
      "endpoint": "/metrics",
      "usePrometheus": true
    }
  },
  "HealthChecks": {
    "Timeout": "00:00:30",
    "Period": "00:00:10",
    "EnableDetailedErrors": true,
    "EnableDatabaseCheck": true,
    "EnableCacheCheck": true,
    "EnableStorageCheck": true,
    "EnableUI": false,
    "UIPath": "/healthchecks-ui"
  },
  "TokenRevocation": {
    "CleanupInterval": "01:00:00",
    "EnableAutoCleanup": true,
    "FailClosedOnRedisError": true
  },
  "QueryResultCache": {
    "_comment": "Query result caching with Redis + in-memory L2 cache for 10-100x performance improvement",
    "DefaultExpiration": "00:05:00",
    "LayerMetadataExpiration": "00:30:00",
    "TileExpiration": "24:00:00",
    "QueryResultExpiration": "00:01:00",
    "CrsTransformExpiration": "7.00:00:00",
    "EnableCompression": true,
    "CompressionThreshold": 1024,
    "UseDistributedCache": true,
    "RedisInstanceName": "Honua:"
  },
  "Redis": {
    "_comment": "Configure Redis connection string in appsettings.Development.json or appsettings.Production.json",
    "ConnectionString": "",
    "InstanceName": "Honua:",
    "Enabled": false
  },
  "CacheInvalidation": {
    "_comment": "Controls cache invalidation resilience and consistency strategies",
    "RetryCount": 3,
    "RetryDelayMs": 100,
    "MaxRetryDelayMs": 5000,
    "Strategy": "Strict",
    "_StrategyOptions": "Strict (fail on invalidation failure), Eventual (allow temporary stale data), ShortTTL (reduce stale window)",
    "HealthCheckSampleSize": 100,
    "MaxDriftPercentage": 1.0,
    "ShortTtl": "00:00:30",
    "EnableDetailedLogging": true,
    "EnableMetrics": true,
    "OperationTimeout": "00:00:10"
  },
  "Resilience": {
    "Hedging": {
      "Enabled": true,
      "MaxHedgedAttempts": 2,
      "DelayMilliseconds": 50,
      "TimeoutSeconds": 5
    },
    "CircuitBreaker": {
      "_comment": "Circuit breaker settings for preventing cascading failures",
      "Database": {
        "Enabled": true,
        "FailureRatio": 0.5,
        "MinimumThroughput": 10,
        "SamplingDuration": "00:00:30",
        "BreakDuration": "00:00:30"
      },
      "ExternalApi": {
        "Enabled": true,
        "FailureRatio": 0.5,
        "MinimumThroughput": 10,
        "SamplingDuration": "00:00:30",
        "BreakDuration": "00:01:00"
      },
      "Storage": {
        "Enabled": true,
        "FailureRatio": 0.5,
        "MinimumThroughput": 10,
        "SamplingDuration": "00:00:30",
        "BreakDuration": "00:00:30"
      }
    }
  },
  "AllowedHosts": "*",
  "GitOps": {
    "Enabled": false,
    "RepositoryPath": "/path/to/config-repo",
    "StateDirectory": "./data/gitops-state",
    "DryRun": false,
    "Watcher": {
      "Branch": "main",
      "Environment": "production",
      "PollIntervalSeconds": 30
    },
    "Credentials": {
      "Username": "",
      "Password": ""
    },
    "Notifications": {
      "Enabled": true,
      "Slack": {
        "Enabled": false,
        "WebhookUrl": "",
        "Channel": "#deployments",
        "BotName": "Honua GitOps",
        "BotIcon": ":rocket:",
        "TimeoutSeconds": 10
      },
      "Email": {
        "Enabled": false,
        "SmtpServer": "smtp.example.com",
        "SmtpPort": 587,
        "UseSsl": true,
        "SmtpUsername": "",
        "SmtpPassword": "",
        "FromAddress": "gitops@example.com",
        "FromName": "Honua GitOps",
        "ToAddresses": [
          "team@example.com"
        ],
        "PerEnvironment": {
          "production": [
            "production-team@example.com"
          ],
          "staging": [
            "dev-team@example.com"
          ]
        },
        "TimeoutSeconds": 30
      },
      "TemplatesDirectory": null,
      "Types": {
        "DeploymentCreated": true,
        "ApprovalRequired": true,
        "Approved": true,
        "Rejected": true,
        "DeploymentStarted": true,
        "DeploymentCompleted": true,
        "DeploymentFailed": true,
        "Rollback": true
      },
      "Retry": {
        "MaxRetries": 3,
        "InitialDelayMs": 1000,
        "MaxDelayMs": 10000,
        "UseExponentialBackoff": true
      }
    }
  },
  "GeoETL": {
    "_comment": "GeoETL workflow resilience and error handling configuration",
    "Retry": {
      "DefaultMaxAttempts": 3,
      "DefaultBackoff": "Exponential",
      "DefaultInitialDelaySeconds": 5,
      "DefaultMaxDelaySeconds": 300,
      "TransientErrorRetryAttempts": 5,
      "UseJitter": true,
      "JitterFactor": 0.2
    },
    "CircuitBreaker": {
      "Enabled": true,
      "FailureThreshold": 5,
      "TimeoutSeconds": 60
    },
    "DeadLetterQueue": {
      "Enabled": true,
      "RetentionDays": 30,
      "MaxRetries": 3,
      "AutoRetryTransientErrors": false
    }
  },
  "honua": {
    "pagination": {
      "defaultLimit": 10,
      "maxLimit": 1000,
      "stacCollectionDefaultLimit": 10,
      "stacCollectionMaxLimit": 1000,
      "stacItemDefaultLimit": 10,
      "stacItemMaxLimit": 1000,
      "stacSearchDefaultLimit": 10,
      "stacSearchMaxLimit": 1000
    },
    "apiVersioning": {
      "defaultVersion": "v1",
      "allowLegacyUrls": true,
      "legacyRedirectVersion": "v1",
      "deprecationWarnings": {
        "_comment": "Add version and sunset date (ISO 8601 format) for deprecated versions",
        "_example": "v1: 2026-12-31T23:59:59Z"
      },
      "deprecationDocumentationUrl": "https://docs.honua.io/api/versioning#deprecation"
    },
    "authentication": {
      "mode": "Local",
      "enforce": true,
      "quickStart": {
        "enabled": false
      }
    },
    "odata": {
      "enabled": true,
      "allowWrites": false,
      "defaultPageSize": 100,
      "maxPageSize": 1000,
      "emitWktShadowProperties": true
    },
    "zarr": {
      "timeSeries": {
        "enableCaching": true,
        "cacheDuration": "00:15:00",
        "maxSlicesPerRequest": 100,
        "enableAggregation": true,
        "chunkCacheSize": 1000,
        "timeStepCacheDuration": "01:00:00"
      }
    },
    "vectorTilePreseed": {
      "maxTilesPerJob": 100000,
      "maxConcurrentJobs": 5,
      "maxJobsPerUser": 3,
      "jobTimeout": "1.00:00:00",
      "maxZoomLevel": 18,
      "rateLimitWindow": "00:00:10"
    },
    "services": {
      "geoservicesREST": {
        "enabled": true,
        "defaultMaxRecordCount": 1000,
        "maxRecordCount": 10000,
        "defaultFormat": "json",
        "enableTelemetry": true
      }
    }
  }
}
