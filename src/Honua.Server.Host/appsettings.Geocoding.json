{
  "_comment": "Geocoding configuration for automatic address geocoding on data upload",
  "Geocoding": {
    "_comment": "Configuration for geocoding providers and automatic geocoding on upload",
    "Providers": {
      "_comment_providers": "Geocoding provider configurations. Configure API keys and endpoints here",
      "Nominatim": {
        "Enabled": true,
        "BaseUrl": "https://nominatim.openstreetmap.org",
        "UserAgent": "Honua.Server/1.0",
        "_comment_userAgent": "Required by Nominatim usage policy. Replace with your application name and email",
        "RateLimit": {
          "MaxRequestsPerSecond": 1,
          "_comment_rateLimit": "Nominatim free tier: 1 request/second max"
        }
      },
      "Mapbox": {
        "Enabled": false,
        "ApiKey": "",
        "_comment_apiKey": "Configure your Mapbox API key here or via environment variable MAPBOX_API_KEY",
        "BaseUrl": "https://api.mapbox.com/geocoding/v5",
        "RateLimit": {
          "MaxRequestsPerSecond": 50
        }
      },
      "Google": {
        "Enabled": false,
        "ApiKey": "",
        "_comment_apiKey": "Configure your Google Maps API key here or via environment variable GOOGLE_MAPS_API_KEY",
        "BaseUrl": "https://maps.googleapis.com/maps/api/geocode",
        "RateLimit": {
          "MaxRequestsPerSecond": 50
        }
      },
      "AzureMaps": {
        "Enabled": false,
        "SubscriptionKey": "",
        "_comment_subscriptionKey": "Configure your Azure Maps subscription key here or via environment variable AZURE_MAPS_KEY",
        "BaseUrl": "https://atlas.microsoft.com/search/address",
        "RateLimit": {
          "MaxRequestsPerSecond": 50
        }
      }
    },
    "AutoGeocoding": {
      "_comment": "Configuration for automatic geocoding on data upload",
      "Enabled": true,
      "_comment_enabled": "Enable/disable automatic geocoding feature",
      "RequireUserConfirmation": true,
      "_comment_requireUserConfirmation": "Require user to confirm address detection before geocoding",
      "DefaultProvider": "nominatim",
      "_comment_defaultProvider": "Default geocoding provider to use (nominatim, mapbox, google, azure-maps)",
      "MinConfidenceThreshold": 0.5,
      "_comment_minConfidenceThreshold": "Minimum confidence score (0-1) to accept geocoding results",
      "MaxRowsAutoGeocode": 1000,
      "_comment_maxRowsAutoGeocode": "Maximum rows to geocode automatically (0 = unlimited, recommend limit for free tier providers)",
      "SkipExistingGeometry": true,
      "_comment_skipExistingGeometry": "Skip rows that already have geometry data",
      "MaxConcurrentRequests": 10,
      "_comment_maxConcurrentRequests": "Maximum concurrent geocoding requests (adjust based on provider rate limits)",
      "TimeoutMs": 10000,
      "_comment_timeoutMs": "Timeout for each geocoding request in milliseconds",
      "MaxRetries": 3,
      "_comment_maxRetries": "Maximum retry attempts for failed requests"
    },
    "AddressDetection": {
      "_comment": "Configuration for automatic address column detection",
      "MinConfidenceForAutoSuggest": 0.7,
      "_comment_minConfidenceForAutoSuggest": "Minimum confidence to auto-suggest address configuration",
      "MaxSampleSize": 100,
      "_comment_maxSampleSize": "Maximum number of rows to sample for address detection",
      "EnableContentAnalysis": true,
      "_comment_enableContentAnalysis": "Enable pattern-based content analysis for better detection",
      "SupportedFormats": [
        "us-address",
        "international",
        "lat-lon-pair",
        "structured-multi-column"
      ]
    },
    "Cache": {
      "_comment": "Geocoding result caching configuration",
      "Enabled": true,
      "_comment_enabled": "Cache geocoding results to reduce API calls",
      "ExpirationHours": 720,
      "_comment_expirationHours": "Cache expiration in hours (default: 30 days)",
      "MaxCacheSize": 100000,
      "_comment_maxCacheSize": "Maximum number of cached results"
    },
    "Monitoring": {
      "_comment": "Monitoring and analytics for geocoding operations",
      "EnableMetrics": true,
      "_comment_enableMetrics": "Collect metrics on geocoding operations",
      "EnableUsageTracking": true,
      "_comment_enableUsageTracking": "Track provider usage for billing and quota management"
    }
  }
}
