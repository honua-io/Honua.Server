{
  "$schema": "./appsettings.schema.json",
  "CapabilitiesCache": {
    // Enable/disable capabilities caching for GetCapabilities responses
    // Set to false for development to always see fresh metadata changes
    // Set to true for production (recommended) for optimal performance
    "EnableCaching": true,

    // Cache duration in minutes (default: 10 minutes)
    // Recommended values based on deployment characteristics:
    // - 5 minutes: High metadata change frequency, prioritize freshness
    // - 10 minutes: Balanced approach (recommended for most deployments)
    // - 15-30 minutes: Low metadata change frequency, prioritize performance
    // - 60+ minutes: Static metadata, maximum performance (use with caution)
    "CacheDurationMinutes": 10,

    // Maximum number of capabilities documents to cache (default: 100)
    // Each entry represents a unique combination of:
    // - Service type (wfs, wms, csw, etc.)
    // - Service ID
    // - Protocol version (2.0.0, 1.3.0, etc.)
    // - Accept-Language (en, es, fr, etc.)
    //
    // Memory estimation (approximate):
    // - Small capabilities (~10KB): 100 entries ≈ 1MB
    // - Medium capabilities (~50KB): 100 entries ≈ 5MB
    // - Large capabilities (~100KB): 100 entries ≈ 10MB
    //
    // Example calculation for typical deployment:
    // - 10 services × 2 versions × 3 languages = 60 cache entries
    "MaxCachedDocuments": 100,

    // Automatically invalidate cache when metadata changes (default: true)
    // When enabled, the cache listens to metadata registry change notifications
    // and invalidates affected capabilities documents when metadata is reloaded
    // Disable only for testing or if using external cache invalidation mechanisms
    "AutoInvalidateOnMetadataChange": true,

    // Include Accept-Language header in cache key (default: true)
    // When enabled, capabilities documents are cached separately per language
    // Disable if:
    // - Your deployment only serves a single language
    // - You don't provide language-specific metadata
    // - You want to reduce cache memory usage
    "CachePerLanguage": true
  },

  // Example: High-traffic production deployment with static metadata
  "CapabilitiesCache:ProductionStatic": {
    "EnableCaching": true,
    "CacheDurationMinutes": 30,
    "MaxCachedDocuments": 200,
    "AutoInvalidateOnMetadataChange": true,
    "CachePerLanguage": true
  },

  // Example: Development environment
  "CapabilitiesCache:Development": {
    "EnableCaching": false,
    "CacheDurationMinutes": 1,
    "MaxCachedDocuments": 10,
    "AutoInvalidateOnMetadataChange": true,
    "CachePerLanguage": false
  },

  // Example: Multilingual deployment with frequent metadata updates
  "CapabilitiesCache:Multilingual": {
    "EnableCaching": true,
    "CacheDurationMinutes": 5,
    "MaxCachedDocuments": 300,
    "AutoInvalidateOnMetadataChange": true,
    "CachePerLanguage": true
  }
}
