{
  "openapi": "3.0.3",
  "info": {
    "title": "Honua OGC API Features",
    "version": "2025-09",
    "description": "OpenAPI description of the Honua sample OGC API Features deployment."
  },
  "servers": [
    {
      "url": "/ogc",
      "description": "Honua sample OGC API"
    }
  ],
  "paths": {
    "/": {
      "get": {
        "summary": "Landing page",
        "description": "Provides links to the API definition, the conformance declaration, and available collections.",
        "operationId": "getLandingPage",
        "responses": {
          "200": {
            "description": "Landing page metadata",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/LandingPage"
                }
              }
            }
          }
        }
      }
    },
    "/conformance": {
      "get": {
        "summary": "List conformance classes",
        "operationId": "getConformance",
        "responses": {
          "200": {
            "description": "Set of conformance classes implemented by the server.",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Conformance"
                }
              }
            }
          }
        }
      }
    },
    "/collections": {
      "get": {
        "summary": "List feature collections",
        "operationId": "getCollections",
        "responses": {
          "200": {
            "description": "Collection metadata",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Collections"
                }
              }
            }
          }
        }
      }
    },
    "/collections/{collectionId}": {
      "get": {
        "summary": "Describe a collection",
        "operationId": "getCollection",
        "parameters": [
          {
            "$ref": "#/components/parameters/collectionId"
          }
        ],
        "responses": {
          "200": {
            "description": "Collection definition",
            "content": {
              "application/json": {
                "schema": {
                  "$ref": "#/components/schemas/Collection"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/collections/{collectionId}/items": {
      "get": {
        "summary": "Query features",
        "operationId": "getFeatures",
        "parameters": [
          {
            "$ref": "#/components/parameters/collectionId"
          },
          {
            "$ref": "#/components/parameters/limit"
          },
          {
            "$ref": "#/components/parameters/offset"
          },
          {
            "$ref": "#/components/parameters/bbox"
          },
          {
            "$ref": "#/components/parameters/datetime"
          },
          {
            "$ref": "#/components/parameters/crs"
          }
        ],
        "responses": {
          "200": {
            "description": "Feature collection",
            "content": {
              "application/geo+json": {
                "schema": {
                  "$ref": "#/components/schemas/FeatureCollection"
                }
              }
            }
          },
          "400": {
            "$ref": "#/components/responses/InvalidParameter"
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    },
    "/collections/{collectionId}/items/{featureId}": {
      "get": {
        "summary": "Fetch a single feature",
        "operationId": "getFeature",
        "parameters": [
          {
            "$ref": "#/components/parameters/collectionId"
          },
          {
            "$ref": "#/components/parameters/featureId"
          }
        ],
        "responses": {
          "200": {
            "description": "Feature",
            "content": {
              "application/geo+json": {
                "schema": {
                  "$ref": "#/components/schemas/Feature"
                }
              }
            }
          },
          "404": {
            "$ref": "#/components/responses/NotFound"
          }
        }
      }
    }
  },
  "components": {
    "parameters": {
      "collectionId": {
        "name": "collectionId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        },
        "description": "Identifier of the collection."
      },
      "featureId": {
        "name": "featureId",
        "in": "path",
        "required": true,
        "schema": {
          "type": "string"
        },
        "description": "Identifier of the feature within the collection."
      },
      "limit": {
        "name": "limit",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 1,
          "maximum": 1000,
          "default": 100
        },
        "description": "Maximum number of items to return.",
        "style": "form",
        "explode": false
      },
      "offset": {
        "name": "offset",
        "in": "query",
        "schema": {
          "type": "integer",
          "minimum": 0
        },
        "description": "Index of the first item to return.",
        "style": "form",
        "explode": false
      },
      "bbox": {
        "name": "bbox",
        "in": "query",
        "description": "Spatial bounding box expressed as minLon,minLat,maxLon,maxLat (WGS84).",
        "style": "form",
        "explode": false,
        "schema": {
          "type": "array",
          "items": {
            "type": "number"
          },
          "minItems": 4,
          "maxItems": 6
        }
      },
      "datetime": {
        "name": "datetime",
        "in": "query",
        "description": "Single date/time or range (RFC 3339).",
        "schema": {
          "type": "string"
        },
        "style": "form",
        "explode": false
      },
      "crs": {
        "name": "crs",
        "in": "query",
        "description": "Target CRS identifier.",
        "schema": {
          "type": "string"
        },
        "style": "form",
        "explode": false
      }
    },
    "responses": {
      "NotFound": {
        "description": "Resource was not found.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ProblemDetails"
            }
          }
        }
      },
      "InvalidParameter": {
        "description": "The request contained an invalid parameter.",
        "content": {
          "application/json": {
            "schema": {
              "$ref": "#/components/schemas/ProblemDetails"
            }
          }
        }
      }
    },
    "schemas": {
      "LandingPage": {
        "type": "object",
        "required": [
          "title",
          "links"
        ],
        "properties": {
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "keywords": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "links": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Link"
            }
          }
        }
      },
      "Conformance": {
        "type": "object",
        "required": [
          "conformsTo"
        ],
        "properties": {
          "conformsTo": {
            "type": "array",
            "items": {
              "type": "string",
              "format": "uri"
            }
          }
        }
      },
      "Collections": {
        "type": "object",
        "required": [
          "collections",
          "links"
        ],
        "properties": {
          "collections": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Collection"
            }
          },
          "links": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Link"
            }
          }
        }
      },
      "Collection": {
        "type": "object",
        "required": [
          "id",
          "title",
          "links"
        ],
        "properties": {
          "id": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "description": {
            "type": "string"
          },
          "itemType": {
            "type": "string"
          },
          "extent": {
            "$ref": "#/components/schemas/Extent"
          },
          "crs": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "keywords": {
            "type": "array",
            "items": {
              "type": "string"
            }
          },
          "links": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Link"
            }
          }
        }
      },
      "Extent": {
        "type": "object",
        "properties": {
          "bbox": {
            "type": "array",
            "items": {
              "type": "array",
              "items": {
                "type": "number"
              },
              "minItems": 4,
              "maxItems": 6
            }
          },
          "crs": {
            "type": "string"
          },
          "temporal": {
            "type": "object",
            "properties": {
              "interval": {
                "type": "array",
                "items": {
                  "type": "array",
                  "items": {
                    "type": "string",
                    "nullable": true
                  },
                  "minItems": 2,
                  "maxItems": 2
                }
              },
              "trs": {
                "type": "string"
              }
            }
          }
        }
      },
      "FeatureCollection": {
        "type": "object",
        "required": [
          "type",
          "features"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "FeatureCollection"
            ]
          },
          "features": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Feature"
            }
          },
          "timeStamp": {
            "type": "string",
            "format": "date-time"
          },
          "numberMatched": {
            "type": "integer",
            "nullable": true
          },
          "numberReturned": {
            "type": "integer",
            "nullable": true
          },
          "links": {
            "type": "array",
            "items": {
              "$ref": "#/components/schemas/Link"
            }
          }
        }
      },
      "Feature": {
        "type": "object",
        "required": [
          "type",
          "id",
          "geometry",
          "properties"
        ],
        "properties": {
          "type": {
            "type": "string",
            "enum": [
              "Feature"
            ]
          },
          "id": {
            "oneOf": [
              {
                "type": "string"
              },
              {
                "type": "integer"
              }
            ]
          },
          "geometry": {
            "type": "object",
            "nullable": true
          },
          "properties": {
            "type": "object"
          }
        }
      },
      "Link": {
        "type": "object",
        "required": [
          "href",
          "rel"
        ],
        "properties": {
          "href": {
            "type": "string",
            "format": "uri-reference"
          },
          "rel": {
            "type": "string"
          },
          "type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          }
        }
      },
      "ProblemDetails": {
        "type": "object",
        "properties": {
          "type": {
            "type": "string"
          },
          "title": {
            "type": "string"
          },
          "status": {
            "type": "integer"
          },
          "detail": {
            "type": "string"
          },
          "instance": {
            "type": "string"
          }
        }
      }
    }
  }
}
