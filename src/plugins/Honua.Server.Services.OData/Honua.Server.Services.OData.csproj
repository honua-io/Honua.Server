<Project Sdk="Microsoft.NET.Sdk.Web">

  <PropertyGroup>
    <TargetFramework>net9.0</TargetFramework>
    <ImplicitUsings>enable</ImplicitUsings>
    <Nullable>enable</Nullable>
    <EnableDynamicLoading>true</EnableDynamicLoading>
    <OutputType>Library</OutputType>

    <!-- Output to plugins directory for easy loading -->
    <OutDir>$(MSBuildThisFileDirectory)../../../plugins/odata/</OutDir>
    <CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>

    <!-- Disable CA2234 for now to allow build -->
    <NoWarn>$(NoWarn);CA2234</NoWarn>
  </PropertyGroup>

  <ItemGroup>
    <!-- Reference to Honua.Server.Core for plugin interfaces -->
    <!-- Note: This should NOT be copied to output - it's provided by the host -->
    <ProjectReference Include="../../Honua.Server.Core/Honua.Server.Core.csproj">
      <Private>false</Private>
      <ExcludeAssets>runtime</ExcludeAssets>
    </ProjectReference>
  </ItemGroup>

  <!-- Copy plugin manifest to output -->
  <ItemGroup>
    <None Include="plugin.json" CopyToOutputDirectory="PreserveNewest" />
  </ItemGroup>

</Project>
